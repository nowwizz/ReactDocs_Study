# useReducer

`useReducer` ëŠ” ì»´í¬ë„ŒíŠ¸ì— reducerë¥¼ ì¶”ê°€í•˜ëŠ” ë¦¬ì•¡íŠ¸ Hookì´ë‹¤.

```jsx
const [state, dispatch] = useReducer(reducer, initialArg, init?)
```

---

## ë ˆí¼ëŸ°ìŠ¤

`useReducer(reducer, initialArg, init?)` 

`useReducer` ë¥¼ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ì— í˜¸ì¶œí•˜ê³ , reducerë¥¼ ì´ìš©í•´ stateë¥¼ ê´€ë¦¬í•œë‹¤.

```jsx
import { useReducer } from 'react';

function reducer(state, action) {
  // ...
}

function MyComponent() {
  const [state, dispatch] = useReducer(reducer, { age: 42 });
  // ...
```

### ë§¤ê°œë³€ìˆ˜

- `reducer` : stateê°€ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸ ë˜ëŠ”ì§€ ì§€ì •í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ì´ë‹¤.
ë¦¬ë“€ì„œ í•¨ìˆ˜ëŠ” ë°˜ë“œì‹œ ìˆœìˆ˜ í•¨ìˆ˜ì—¬ì•¼ í•˜ë©°, stateì™€ actionì„ ì¸ìˆ˜ë¡œ ë°›ì•„ì•¼ í•˜ê³ , ë‹¤ìŒ stateë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤. stateì™€ actionì—ëŠ” ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í• ë‹¹ë  ìˆ˜ ìˆë‹¤.
- `initialArg` : ì´ˆê¸° stateê°€ ê³„ì‚°ë˜ëŠ” ê°’ì´ë‹¤. ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í• ë‹¹ë  ìˆ˜ ìˆë‹¤. ì´ˆê¸° stateê°€ ì–´ë–»ê²Œ ê³„ì‚°ë˜ëŠ”ì§€ëŠ” ë‹¤ìŒ `init` ì¸ìˆ˜ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.
- ì„ íƒì‚¬í•­ `init` : ì´ˆê¸° stateë¥¼ ë°˜í™˜í•˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜ì´ë‹¤. ì´ í•¨ìˆ˜ê°€ ì¸ìˆ˜ì— í• ë‹¹ë˜ì§€ ì•Šìœ¼ë©´ ì´ˆê¸° stateëŠ” `initialArg` ë¡œ ì„¤ì •ëœë‹¤. í• ë‹¹ë˜ì—ˆë‹¤ë©´ ì´ˆê¸° stateëŠ” `init(initialArg)` ë¥¼ í˜¸ì¶œí•œ ê²°ê³¼ê°€ í• ë‹¹ëœë‹¤.

### ë°˜í™˜ê°’

`useReducer` ëŠ” 2ê°œì˜ ì—˜ë¦¬ë¨¼íŠ¸ë¡œ êµ¬ì„±ëœ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.

1. í˜„ì¬ state
    1. ì²« ë²ˆì§¸ ë Œë”ë§ì—ì„œì˜ stateëŠ” `init(initialArg)`  ë˜ëŠ” `initialArg` ë¡œ ì„¤ì •ëœë‹¤.
2. `dispatch` í•¨ìˆ˜
    1. `dispatch` ëŠ” stateë¥¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚¨ë‹¤.

### ì£¼ì˜ì‚¬í•­

- `useReducer` ëŠ” Hookì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë˜ëŠ” ì»¤ìŠ¤í…€ Hookì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸ì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. í•„ìš”í•œ ê²½ìš° ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¡œ stateë¥¼ ì˜®ê²¨ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- `dispatch` í•¨ìˆ˜ëŠ” ì•ˆì •ëœ ì‹ë³„ì„±ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, í”íˆ Effectì˜ ì˜ì¡´ì„±ì—ì„œ ì œì™¸í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
í•˜ì§€ë§Œ í¬í•¨í•´ë„ Effectë¥¼ ì‹¤í–‰í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ë¦°í„°ì—ì„œ ì˜ì¡´ì„±ì„ ìƒëµí•´ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ê·¸ë ‡ê²Œ í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ë‹¤.
- Strict Modeì—ì„œëŠ” ìš°ì—°í•œ ë¹„ìˆœìˆ˜ì„±ì„ ì°¾ì•„ë‚´ê¸° ìœ„í•´ Reducerì™€ `init` í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•œë‹¤.
ê°œë°œ í™˜ê²½ì—ì„œë§Œ í•œì •ëœ ë™ì‘ì´ë©°, ë°°í¬ í™˜ê²½ì—ì„œëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. Reducerì™€ `init` í•¨ìˆ˜ê°€ ìˆœìˆ˜ í•¨ìˆ˜ë¼ë©´ ë¡œì§ì— ì–´ë– í•œ ì˜í–¥ë„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. í˜¸ì¶œ ì¤‘ í•˜ë‚˜ì˜ ê²°ê³¼ëŠ” ë¬´ì‹œí•œë‹¤.

---

## `dispatch` í•¨ìˆ˜

`useReducer` ì— ì˜í•´ ë°˜í™˜ë˜ëŠ” `dispatch`  í•¨ìˆ˜ëŠ” stateë¥¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚¨ë‹¤. `dispatch` ì˜ ìœ ì¼í•œ ì¸ìˆ˜ëŠ” actionì´ë‹¤.

```jsx
const [state, dispatch] = useReducer(reducer, { age: 42 });

function handleClick() {
  dispatch({ type: 'incremented_age' });
  // ...
```

ë¦¬ì•¡íŠ¸ëŠ” í˜„ì¬ `state` ì™€ `dispatch` ë¥¼ í†µí•´ ì „ë‹¬ëœ actionì„ ì œê³µë°›ì•„ í˜¸ì¶œëœ `reducer` ì˜ ë°˜í™˜ê°’ì„ í†µí•´ ë‹¤ìŒ state ê°’ì„ ì„¤ì •í•œë‹¤.

### ë§¤ê°œë³€ìˆ˜

- `action` : ì‚¬ìš©ìì— ì˜í•´ ìˆ˜í–‰ëœ í™œë™ì´ë‹¤. ëª¨ë“  ë°ì´í„° íƒ€ì…ì´ í• ë‹¹ë  ìˆ˜ ìˆë‹¤. ì»¨ë²¤ì…˜ì— ì˜í•´ actionì€ ì¼ë°˜ì ìœ¼ë¡œ actionì„ ì •ì˜í•˜ëŠ” `type` í”„ë¡œí¼í‹°ì™€ ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ” ê¸°íƒ€ í”„ë¡œí¼í‹°ë¥¼ í¬í•¨í•˜ëŠ” ê°ì²´ë¡œ êµ¬ì„±ëœë‹¤.

### ë°˜í™˜ê°’

`dispatch` í•¨ìˆ˜ëŠ” ì–´ë–¤ ê°’ë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ë‹¤.

### ì£¼ì˜ì‚¬í•­

- **`dispatch` í•¨ìˆ˜ëŠ” ì˜¤ì§ ë‹¤ìŒ ë Œë”ë§ì— ì‚¬ìš©í•  state ë³€ìˆ˜ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤.**
ë§Œì•½ `dispatch` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì§í›„ì— state ë³€ìˆ˜ë¥¼ ì½ëŠ”ë‹¤ë©´ í˜¸ì¶œ ì´ì „ì˜ ìµœì‹ í™”ë˜ì§€ ì•Šì€ ê°’ì„ ì°¸ì¡°í•  ê²ƒì´ë‹¤.
- `Object.is` ë¹„êµë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ì œê³µëœ ê°’ê³¼ í˜„ì¬ `state` ë¥¼ ë¹„êµí•œ ê°’ì´ ê°™ì„ ê²½ìš°, ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ì™€ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ìì‹ ìš”ì†Œë“¤ì˜ ë¦¬ë Œë”ë§ì„ ê±´ë„ˆë›´ë‹¤. 
ì´ê²ƒì€ ìµœì í™”ì— ê´€ë ¨ëœ ë™ì‘ìœ¼ë¡œì¨ ê²°ê³¼ë¥¼ ë¬´ì‹œí•˜ê¸° ì „ì— ì»´í¬ë„ŒíŠ¸ê°€ í˜¸ì¶œë˜ì§€ë§Œ, í˜¸ì¶œëœ ê²°ê³¼ê°€ ì½”ë“œì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.
- ë¦¬ì•¡íŠ¸ëŠ” stateì˜ ì—…ë°ì´íŠ¸ë¥¼ **batch(ì¼ê´„ì²˜ë¦¬)**í•œë‹¤.
ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ìˆ˜í–‰ë˜ê³  `set` í•¨ìˆ˜ê°€ ëª¨ë‘ í˜¸ì¶œëœ í›„ì— í™”ë©´ì„ ì—…ë°ì´íŠ¸í•œë‹¤. ì´ëŠ” í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ì— ë¦¬ë Œë”ë§ì´ ì—¬ëŸ¬ë²ˆ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.
DOM ì ‘ê·¼ ë“± ì´ë¥¸ í™”ë©´ ì—…ë°ì´íŠ¸ë¥¼ ê°•ì œí•´ì•¼í•  íŠ¹ìˆ˜í•  ìƒí™©ì´ ìˆì„ ê²½ìš° `flushSync` ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

---

## ì‚¬ìš©ë²•

### ì»´í¬ë„ŒíŠ¸ì— reducer ì¶”ê°€í•˜ê¸°

stateë¥¼ reducerë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `useReducer` ë¥¼ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒë‹¨ì—ì„œ í˜¸ì¶œí•œë‹¤.

```jsx
import { useReducer } from 'react';

function reducer(state, action) {
  // ...
}

function MyComponent() {
  const [state, dispatch] = useReducer(reducer, { age: 42 });
  // ...
```

`useReducer` ëŠ” ì •í™•íˆ 2ê°œì˜ í•­ëª©ì´ í¬í•¨ëœ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.

1. state ë³€ìˆ˜ì˜ `í˜„ì¬ state` : ìµœì´ˆì—ëŠ” ì‚¬ìš©ìê°€ ì œê³µí•œ `ì´ˆê¸° state` ë¡œ ì´ˆê¸°í™”ëœë‹¤.
2. `dispatch í•¨ìˆ˜` : ìƒí˜¸ì‘ìš©ì— ëŒ€ì‘í•˜ì—¬ stateë¥¼ ë³€ê²½í•œë‹¤.

í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì‚¬ìš©ìê°€ ìˆ˜í–‰í•œ í™œë™ì„ ì˜ë¯¸í•˜ëŠ” action ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ í•˜ì—¬ `dispatch` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë¼.

```jsx
function handleClick() {
  dispatch({ type: 'incremented_age' });
}
```

ë¦¬ì•¡íŠ¸ëŠ” í˜„ì¬ stateì™€ actionì„ `reducer í•¨ìˆ˜` ë¡œ ì „ë‹¬í•œë‹¤. reducerëŠ” ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•œ í›„ ë°˜í™˜í•œë‹¤.

ë¦¬ì•¡íŠ¸ëŠ” ë‹¤ìŒ stateë¥¼ ì €ì¥í•œ ë’¤ì— ì»´í¬ë„ŒíŠ¸ì™€ í•¨ê»˜ ë Œë”ë§í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.

`useReducer` ëŠ” `useState` ì™€ ë§¤ìš° ìœ ì‚¬í•˜ì§€ë§Œ, state ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì˜ ë‹¨ì¼ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì°¨ì´ì ì´ ìˆë‹¤.

---

## reducer í•¨ìˆ˜ ì‘ì„±í•˜ê¸°

reducer í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ì„ ì–¸í•œë‹¤.

```jsx
function reducer(state, action) {
  // ...
}
```

ì´í›„ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , ê³„ì‚°ëœ stateë¥¼ ë°˜í™˜í•œë‹¤.

ë³´í†µì€ ì»¨ë²¤ì…˜ì— ë”°ë¼ `switch` ë¬¸ì„ ì‚¬ìš©í•œë‹¤. `switch` ëŠ” ê° `case` ë¥¼ ì´ìš©í•´ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•˜ê³  ë°˜í™˜í•œë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      return {
        name: state.name,
        age: state.age + 1
      };
    }
    case 'changed_name': {
      return {
        name: action.nextName,
        age: state.age
      };
    }
  }
  throw Error('Unknown action: ' + action.type);
}
```

Actionsì€ ë‹¤ì–‘í•œ í˜•íƒœê°€ ë  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì»¨ë²¤ì…˜ì— ë”°ë¼ ì•¡ì…˜ì´ ë¬´ì—‡ì¸ì§€ ì •ì˜í•˜ëŠ” `type` í”„ë¡œí¼í‹°ë¥¼ í¬í•¨í•œ ê°ì²´ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.

`type` ì€ reducerê°€ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•˜ëŠ”ë° í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•œë‹¤.

```jsx
function Form() {
  const [state, dispatch] = useReducer(reducer, { name: 'Taylor', age: 42 });

  function handleButtonClick() {
    dispatch({ type: 'incremented_age' });
  }

  function handleInputChange(e) {
    dispatch({
      type: 'changed_name',
      nextName: e.target.value
    });
  }
  // ...
```

action type ì´ë¦„ì€ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì§€ì—­ì ì´ë‹¤.

ê° actionì€ ë‹¨ì¼ ìƒí˜¸ì‘ìš©ì„ ì„¤ëª…í•˜ë©°, ë°ì´í„°ì— ì—¬ëŸ¬ ë³€ê²½ì‚¬í•­ì„ ì´ˆë˜í•˜ë”ë¼ë„ í•˜ë‚˜ì˜ ìƒí˜¸ì‘ìš©ë§Œì„ ë‚˜íƒ€ë‚¸ë‹¤.

stateì˜ í˜•íƒœëŠ” ì„ì˜ì ì´ì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ê°ì²´ë‚˜ ë°°ì—´ì¼ ê²ƒì´ë‹¤.

### ì£¼ì˜í•˜ì„¸ìš”!

stateëŠ” ì½ê¸° ì „ìš©ì´ë‹¤. stateì˜ ê°ì²´ë‚˜ ë°°ì—´ì„ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤!

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      // ğŸš© Don't mutate an object in state like this:
      state.age = state.age + 1;
      return state;
    }
```

ëŒ€ì‹  reducerì—ì„œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë°˜í™˜í•´ë¼.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      // âœ… Instead, return a new object
      return {
        ...state,
        age: state.age + 1
      };
    }
```

---

## ì´ˆê¸° state ì¬ìƒì„± ë°©ì§€í•˜ê¸°

ë¦¬ì•¡íŠ¸ëŠ” ì´ˆê¸° stateë¥¼ ì €ì¥í•œ í›„, ë‹¤ìŒ ë Œë”ë§ì—ì„œëŠ” ì´ë¥¼ ë¬´ì‹œí•œë‹¤.

```jsx
function createInitialState(username) {
  // ...
}

function TodoList({ username }) {
  const [state, dispatch] = useReducer(reducer, createInitialState(username));
  // ...
```

`createInitialState(username)` ì˜ ë°˜í™˜ê°’ì´ ì´ˆê¸° ë Œë”ë§ì—ë§Œ ì‚¬ìš©ë˜ë”ë¼ë„ í•¨ìˆ˜ëŠ” ë§¤ ë Œë”ë§ë§ˆë‹¤ í˜¸ì¶œë  ê²ƒì´ë‹¤. í•¨ìˆ˜ê°€ í° ë°°ì—´ì´ë‚˜ ë¬´ê±°ìš´ ì—°ì‚°ì„ ë‹¤ë£° ê²½ìš°ì—ëŠ” ì„±ëŠ¥ìƒ ë‚­ë¹„ê°€ ë  ìˆ˜ ìˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” `useReducer` ì˜ 3ë²ˆì§¸ ì¸ìˆ˜ì— ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

```jsx
function createInitialState(username) {
  // ...
}

function TodoList({ username }) {
  const [state, dispatch] = useReducer(reducer, username, createInitialState);
  // ...
```

`createInitialState()` ì²˜ëŸ¼ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, `createInitialState` í•¨ìˆ˜ ìì²´ë¥¼ ì „ë‹¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ë¼.

ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ì´ˆê¸°í™” ì´í›„ì— ì´ˆê¸° stateê°€ ë‹¤ì‹œ ìƒì„±ë˜ëŠ” ì¼ì€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

ìœ„ì˜ ì˜ˆì‹œì—ì„œëŠ” `createInitialState` í•¨ìˆ˜ê°€ `username` ì„ ì¸ìˆ˜ë¡œ ë°›ëŠ”ë‹¤. ë§Œì•½ ì´ˆê¸°í™” í•¨ìˆ˜ê°€ ì´ˆê¸° stateë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒì— ì–´ë–¤ ì¸ìˆ˜ë„ í•„ìš”í•˜ì§€ ì•Šë‹¤ë©´, `useReducer` ì˜ ë‘ ë²ˆì§¸ ì¸ìˆ˜ì— `null` ì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

---

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### dispatchë¡œ actionì„ í˜¸ì¶œí•´ë„ ì˜¤ë˜ëœ state ê°’ì´ ì¶œë ¥ëœë‹¤.

`dispatch` í•¨ìˆ˜ì˜ í˜¸ì¶œì„ í˜„ì¬ ë™ì‘í•˜ê³  ìˆëŠ” ì½”ë“œì˜ stateë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤.

```jsx
function handleClick() {
  console.log(state.age);  // 42

  dispatch({ type: 'incremented_age' }); // Request a re-render with 43
  console.log(state.age);  // Still 42!

  setTimeout(() => {
    console.log(state.age); // Also 42!
  }, 5000);
}
```

ì´ëŸ¬í•œ í˜„ìƒì€ stateê°€ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œì„œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ì¼ì–´ë‚œë‹¤.

stateë¥¼ ì—…ë°ì´íŠ¸í•˜ë©´ ìƒˆë¡œìš´ stateë¥¼ ì´ìš©í•œ ë˜ ë‹¤ë¥¸ ë Œë”ë§ì´ ìš”ì²­ë˜ì§€ë§Œ, ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ì˜ `state`  ìë°”ìŠ¤í¬ë¦½íŠ¸ ë³€ìˆ˜ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

ë§Œì•½ ë‹¤ìŒ state ê°’ì„ ì•Œê³  ì‹¶ë‹¤ë©´, reducer í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì„œ ë‹¤ìŒ ê°’ì„ ê³„ì‚°í•´ë³¼ ìˆ˜ ìˆë‹¤.

```jsx
const action = { type: 'incremented_age' };
dispatch(action);

const nextState = reducer(state, action);
console.log(state);     // { age: 42 }
console.log(nextState); // { age: 43 }
```

---

### dispatchë¡œ actionì„ í˜¸ì¶œí•´ë„ í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠëŠ”ë‹¤.

ë¦¬ì•¡íŠ¸ëŠ” **ì´ì „ stateì™€ ë‹¤ìŒ stateë¥¼ ë¹„êµí–ˆì„ ë•Œ, ê°’ì´ ì¼ì¹˜í•œë‹¤ë©´ ì—…ë°ì´íŠ¸ê°€ ë¬´ì‹œëœë‹¤.**

ë¹„êµëŠ” `Object.is` ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. ì´ëŸ° í˜„ìƒì€ ë³´í†µ ê°ì²´ë‚˜ ë°°ì—´ì˜ stateë¥¼ ì§ì ‘ì ìœ¼ë¡œ ìˆ˜ì •í–ˆì„ ë•Œ ë°œìƒí•œë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      // ğŸš© Wrong: mutating existing object
      state.age++;
      return state;
    }
    case 'changed_name': {
      // ğŸš© Wrong: mutating existing object
      state.name = action.nextName;
      return state;
    }
    // ...
  }
}
```

ë¦¬ì•¡íŠ¸ëŠ” ê¸°ì¡´ì˜ `state` ê°ì²´ê°€ mutation(ë³€ê²½ëœ ìƒíƒœ?)ëœ ìƒíƒœë¡œ ë°˜í™˜ëœë‹¤ë©´ ì—…ë°ì´íŠ¸ë¥¼ ë¬´ì‹œí•œë‹¤.

ì´ëŸ¬í•œ í˜„ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” ê°ì²´ë‚˜ ë°°ì—´ì„ mutationì‹œí‚¤ì§€ ì•Šê³  ê°ì²´ stateë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ë°°ì—´ stateë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      // âœ… Correct: creating a new object
      return {
        ...state,
        age: state.age + 1
      };
    }
    case 'changed_name': {
      // âœ… Correct: creating a new object
      return {
        ...state,
        name: action.nextName
      };
    }
    // ...
  }
}
```

---

### reducerì˜ state ì¼ë¶€ê°€ dispatchëœ ì´í›„ì— undefinedê°€ í• ë‹¹ëœë‹¤.

ê°ê°ì˜ `case` ê°€ **ìƒˆë¡œìš´ stateë¥¼ ë°˜í™˜í•  ë•Œ ê¸°ì¡´ì— ìˆë˜ í•„ë“œë¥¼ ëª¨ë‘ ë³µì‚¬í•˜ëŠ”ì§€** í™•ì¸í•´ ë´ë¼.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      return {
        ...state, // Don't forget this!
        age: state.age + 1
      };
    }
    // ...
```

ìœ„ì˜ ì½”ë“œì—ì„œëŠ” `â€¦state` ê°€ ì—†ë‹¤ë©´ ë‹¤ìŒ stateëŠ” ì˜¤ë¡œì§€ `age` í•„ë“œë§Œ í¬í•¨í•˜ê±°ë‚˜, ì•„ë¬´ê²ƒë„ í¬í•¨í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.

---

### reducerì˜ ëª¨ë“  stateê°€ dispatchê°€ ì´ë£¨ì–´ ì§„ í›„ undefinedê°€ í• ë‹¹ëœë‹¤.

stateì— ì˜ˆê¸°ì¹˜ ì•Šì€ `undefined` ê°€ í• ë‹¹ë˜ê³  ìˆë‹¤ë©´ case ì¤‘ í•˜ë‚˜ì— `return` ì´ ëˆ„ë½ë˜ì—ˆê±°ë‚˜ actionì˜ íƒ€ì…ì´ `case` ì™€ ì§ì§€ì–´ì§€ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆë‹¤.

ì´ìœ ë¥¼ ì°¾ê¸° ìœ„í•´ switchë¬¸ ë°–ì—ì„œ ì—ëŸ¬ë¥¼ throwí•  ìˆ˜ ìˆë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      // ...
    }
    case 'edited_name': {
      // ...
    }
  }
  throw Error('Unknown action: ' + action.type);
}
```

ì´ ì™¸ì—ë„ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ê°™ì€ ì •ì  íƒ€ì… ì²´ì»¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

---

### â€œToo many re-rendersâ€ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

`Too many re-renders. React limits the number of renders to prevent an infinite loop.` ë¼ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

ì¼ë°˜ì ìœ¼ë¡œëŠ” ë Œë”ë§ ê³¼ì •ì—ì„œ dispatchê°€ ì‹¤í–‰ë  ë•Œ ì´ëŸ¬í•œ ì¼ì´ ì¼ì–´ë‚œë‹¤. ë Œë”ë§ì€ dispatchë¥¼ ì•¼ê¸°í•˜ê³ , dispatchëŠ” ë Œë”ë§ì„ ì•¼ê¸°í•˜ë¯€ë¡œ ë Œë”ë§ ë¬´í•œ ë£¨í”„ê°€ ì¼ì–´ë‚œë‹¤.

ì´ëŸ¬í•œ ìƒí™©ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì˜ëª» í˜¸ì¶œí•  ë•Œ ì¢…ì¢… ë°œìƒí•œë‹¤.

```jsx
// ğŸš© Wrong: calls the handler during render
return <button onClick={handleClick()}>Click me</button>

// âœ… Correct: passes down the event handler
return <button onClick={handleClick}>Click me</button>

// âœ… Correct: passes down an inline function
return <button onClick={(e) => handleClick(e)}>Click me</button>
```

ì˜¤ë¥˜ì˜ ì›ì¸ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì–´ëŠ `dispatch` í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ê°€ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì½˜ì†”ì°½ì˜ ì˜¤ë¥˜ ì˜†ì— ìˆëŠ” í™”ì‚´í‘œë¥¼ í´ë¦­í•œ í›„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ìŠ¤íƒì„ ì°¾ì•„ë´ë¼.

---

### reducerì™€ ì´ˆê¸°í™” í•¨ìˆ˜ê°€ ë‘ ë²ˆ í˜¸ì¶œëœë‹¤.

ë¦¬ì•¡íŠ¸ëŠ” ì—„ê²© ëª¨ë“œì¼ ë•Œ reducerì™€ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ë‘ ë²ˆì”© í˜¸ì¶œí•œë‹¤. ì´ í˜„ìƒì€ ì½”ë“œ ì‹¤í–‰ì— ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ëŸ¬í•œ í˜„ìƒì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆœìˆ˜í•¨ìˆ˜ë¡œ ìœ ì§€ë  ìˆ˜ ìˆë„ë¡ ì˜¤ì§ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì¼ì–´ë‚˜ë©°, ë‘ ê°œì˜ í˜¸ì¶œ ì¤‘ í•˜ë‚˜ëŠ” ë¬´ì‹œëœë‹¤.

ì»´í¬ë„ŒíŠ¸, ì´ˆê¸°í™” í•¨ìˆ˜, reducerê°€ ìˆœìˆ˜í•˜ë‹¤ë©´ ë¡œì§ì— ì•„ë¬´ëŸ° ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì§€ë§Œ, ìˆœìˆ˜í•˜ì§€ ì•Šë‹¤ë©´ ì‹¤ìˆ˜ë¥¼ ì•Œì•„ì±Œ ìˆ˜ ìˆë„ë¡ ì•Œë ¤ì¤€ë‹¤.

ì˜ˆì‹œë¡œ, ì•„ë˜ì˜ ìˆœìˆ˜í•˜ì§€ ì•Šì€ reducer í•¨ìˆ˜ëŠ” state ë°°ì—´ì— mutationì„ ì¼ìœ¼í‚¤ê³  ìˆë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'added_todo': {
      // ğŸš© Mistake: mutating state
      state.todos.push({ id: nextId++, text: action.text });
      return state;
    }
    // ...
  }
}
```

ë¦¬ì•¡íŠ¸ëŠ” reducer í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ë¯€ë¡œ todoê°€ ë‘ ê°œ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆê³ , ì´ë¥¼ í†µí•´ reducer í•¨ìˆ˜ ì‘ì„±ì— ì‹¤ìˆ˜ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤.

ì´ëŸ¬í•œ ì‹¤ìˆ˜ëŠ” ë°°ì—´ì„ mutationí•˜ì§€ ì•Šê³  êµì²´í•˜ëŠ” ë°©ë²•ì„ í†µí•´ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case 'added_todo': {
      // âœ… Correct: replacing with new state
      return {
        ...state,
        todos: [
          ...state.todos,
          { id: nextId++, text: action.text }
        ]
      };
    }
    // ...
  }
}
```

ì´ì œ reducer í•¨ìˆ˜ëŠ” ìˆœìˆ˜í•˜ë¯€ë¡œ, ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ì–´ë„ ê°™ì€ ê°’ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ìˆœìˆ˜ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê°œë°œ í™˜ê²½ì—ì„œ ë‘ ë²ˆì”© í˜¸ì¶œí•œë‹¤.

**ì˜¤ë¡œì§€ ì»´í¬ë„ŒíŠ¸ì™€ ì´ˆê¸°í™” í•¨ìˆ˜, reducer í•¨ìˆ˜ë§Œ ìˆœìˆ˜í•  í•„ìš”ê°€ ìˆë‹¤.**

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ìˆœìˆ˜í•  í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë‘ ë²ˆì”© í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.
