# Effectì˜ ì˜ì¡´ì„± ì œê±°í•˜ê¸°

Effectë¥¼ ì‘ì„±í•˜ë©´ ë¦°í„°ëŠ” Effectì˜ ì˜ì¡´ì„± ëª©ë¡ì— Effectê°€ ì½ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì„ í¬í•¨í–ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

ì´ë ‡ê²Œ í•˜ë©´ Effectê°€ ì»´í¬ë„ŒíŠ¸ì˜ ìµœì‹  props ë° stateì™€ ë™ê¸°í™” ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ Effectê°€ ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë˜ê±°ë‚˜ ë¬´í•œ ë£¨í”„ë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆë‹¤. Effectì—ì„œ ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ ê²€í† í•˜ê³  ì œê±°í•´ë³´ì.

## ì˜ì¡´ì„±ì€ ì½”ë“œì™€ ì¼ì¹˜í•´ì•¼ í•œë‹¤.

Effectë¥¼ ì‘ì„±í•  ë•ŒëŠ” ë¨¼ì € Effectê°€ ìˆ˜í–‰í•˜ê¸°ë¥¼ ì›í•˜ëŠ” ì‘ì—…ì„ ì‹œì‘í•˜ê³  ì¤‘ì§€í•˜ëŠ” ë°©ë²•ì„ ì§€ì •í•œë‹¤.

```jsx
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
    // ...
}
```

ê·¸ëŸ° ë‹¤ìŒ Effect ì˜ì¡´ì„±ì„ ë¹„ì›Œë‘ë©´ ë¦°í„°ê°€ ì˜¬ë°”ë¥¸ ì˜ì¡´ì„±ì„ ì œì•ˆí•œë‹¤.

```jsx
function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared
  // ...
}
```

EffectëŠ” ë°˜ì‘í˜• ê°’ì— â€œë°˜ì‘â€í•œë‹¤. `roomId` ëŠ” ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ, ë¦°í„°ëŠ” ì´ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í–ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

`roomId` ê°€ ë‹¤ë¥¸ ê°’ì„ ë°›ìœ¼ë©´ ë¦¬ì•¡íŠ¸ëŠ” Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•œë‹¤.

## ì˜ì¡´ì„±ì„ ì œê±°í•˜ë ¤ë©´ ì˜ì¡´ì„±ì´ ì•„ë‹˜ì„ ì¦ëª…í•˜ì„¸ìš”.

Effectì˜ ì˜ì¡´ì„±ì„ â€œì„ íƒâ€í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•´ë¼.

Effectì˜ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  `ë°˜ì‘í˜• ê°’` ì€ ì˜ì¡´ì„± ëª©ë¡ì— ì„ ì–¸ë˜ì–´ì•¼ í•œë‹¤. ì˜ì¡´ì„± ëª©ë¡ì€ ì£¼ë³€ ì½”ë“œì— ì˜í•´ ê²°ì •ëœë‹¤.

```jsx
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) { // This is a reactive value
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // This Effect reads that reactive value
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // âœ… So you must specify that reactive value as a dependency of your Effect
  // ...
}
```

ë°˜ì‘í˜• ê°’ì—ëŠ” propsì™€ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì§ì ‘ ì„ ì–¸ëœ ëª¨ë“  ë³€ìˆ˜ ë° í•¨ìˆ˜ê°€ í¬í•¨ëœë‹¤.

`roomId` ëŠ” ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ì˜ì¡´ì„± ëª©ë¡ì—ì„œ ì œê±°í•  ìˆ˜ ì—†ë‹¤. ë¦°í„°ê°€ í—ˆìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // ğŸ”´ React Hook useEffect has a missing dependency: 'roomId'
  // ...
}
```

**ì˜ì¡´ì„±ì„ ì œê±°í•˜ë ¤ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì˜ì¡´ì„±ì´ ë  í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì„ ë¦°í„°ì— â€œì¦ëª…â€í•´ì•¼ í•œë‹¤.**

ì˜ˆë¥¼ ë“¤ì–´ `roomId` ë¥¼ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ ì´ë™ì‹œì¼œì„œ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹ˆê³  ì¬ë Œë”ë§ ì‹œì—ë„ ë³€ê²½ë˜ì§€ ì•ŠìŒì„ ì¦ëª…í•  ìˆ˜ ìˆë‹¤.

```jsx
const serverUrl = 'https://localhost:1234';
const roomId = 'music'; // Not a reactive value anymore

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // âœ… All dependencies declared
  // ...
}
```

## ì˜ì¡´ì„±ì„ ë³€ê²½í•˜ë ¤ë©´ ì½”ë“œë¥¼ ë³€ê²½í•˜ì„¸ìš”.

ì‘ì—… íë¦„ì—ì„œ íŒ¨í„´ì„ ë°œê²¬í–ˆì„ ìˆ˜ë„ ìˆë‹¤.

1. ë¨¼ì € Effectì˜ ì½”ë“œ ë˜ëŠ” ë°˜ì‘í˜• ê°’ ì„ ì–¸ ë°©ì‹ì„ ë³€ê²½í•œë‹¤.
2. ê·¸ëŸ° ë‹¤ìŒ, **ë³€ê²½í•œ ì½”ë“œì— ë§ê²Œ** ì˜ì¡´ì„±ì„ ì¡°ì •í•œë‹¤.
3. ì˜ì¡´ì„± ëª©ë¡ì´ ë§˜ì— ë“¤ì§€ ì•Šìœ¼ë©´ **ì²« ë²ˆì§¸ ë‹¨ê³„ë¡œ ëŒì•„ê°„ë‹¤.**

ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ì¤‘ìš”í•˜ë‹¤. ì˜ì¡´ì„±ì„ ë³€ê²½í•˜ë ¤ë©´ ë¨¼ì € ì£¼ë³€ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.

ì˜ì¡´ì„± ëª©ë¡ì€ Effectì˜ ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì˜ ëª©ë¡ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

### ì£¼ì˜í•˜ì„¸ìš”!

ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì´ì™€ ê°™ì´ ë¦°í„°ë¥¼ ì–µì œí•˜ëŠ” Effectê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

```jsx
useEffect(() => {
  // ...
  // ğŸ”´ Avoid suppressing the linter like this:
  // eslint-ignore-next-line react-hooks/exhaustive-deps
}, []);
```

**ì˜ì¡´ì„±ì´ ì½”ë“œì™€ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ë²„ê·¸ê°€ ë°œìƒí•  ìœ„í—˜ì´ ë§¤ìš° ë†’ë‹¤.**

ë¦°í„°ë¥¼ ì–µì œí•˜ë©´ Effectê°€ ì˜ì¡´í•˜ëŠ” ê°’ì— ëŒ€í•´ ë¦¬ì•¡íŠ¸ì— ê±°ì§“ë§ì„ í•˜ê²Œ ëœë‹¤.

ëŒ€ì‹  ë‹¤ìŒì— ì†Œê°œí•  ê¸°ìˆ ì„ ì‚¬ìš©í•´ë¼.

## ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°í•˜ê¸°

ì½”ë“œë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•´ Effectì˜ ì˜ì¡´ì„±ì„ ì¡°ì •í•  ë•Œë§ˆë‹¤ ì˜ì¡´ì„± ëª©ë¡ì„ ì‚´í´ë´ë¼.

ì´ëŸ¬í•œ ì˜ì¡´ì„± ì¤‘ í•˜ë‚˜ë¼ë„ ë³€ê²½ë˜ë©´ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ í•©ë¦¬ì ì¼ê¹Œ? ê°€ë” ëŒ€ë‹µì€ â€œì•„ë‹ˆì˜¤â€ê°€ ë  ìˆ˜ ìˆë‹¤.

- ë‹¤ë¥¸ ì¡°ê±´ì—ì„œ Effectì˜ ë‹¤ë¥¸ ë¶€ë¶„ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆë‹¤.
- ì¼ë¶€ ì˜ì¡´ì„±ì˜ ë³€ê²½ì— â€œë°˜ì‘â€í•˜ì§€ ì•Šê³  â€œìµœì‹  ê°’â€ë§Œ ì½ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤.
- ì˜ì¡´ì„±ì€ ê°ì²´ë‚˜ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì˜ë„ì¹˜ ì•Šê²Œ ë„ˆë¬´ ìì£¼ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.

ì˜¬ë°”ë¥¸ í•´ê²°ì±…ì„ ì°¾ìœ¼ë ¤ë©´ Effectì— ëŒ€í•œ ëª‡ ê°€ì§€ ì§ˆë¬¸ì— ë‹µí•´ì•¼ í•œë‹¤.

### ì´ ì½”ë“œë¥¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ì˜®ê²¨ì•¼ í•˜ë‚˜ìš”?

ê°€ì¥ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•  ê²ƒì€ ì´ ì½”ë“œê°€ Effectê°€ ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ì—¬ë¶€ì´ë‹¤.

í¼ì„ ìƒìƒí•´ ë³´ì.

ì œì¶œí•  ë•Œ `submitted` state ë³€ìˆ˜ë¥¼ `true` ë¡œ ì„¤ì •í•œë‹¤. POST ìš”ì²­ì„ ë³´ë‚´ê³  ì•Œë¦¼ì„ í‘œì‹œí•´ì•¼ í•œë‹¤.

ì´ ë¡œì§ì€ `submitted` ê°€ `true` ê°€ ë  ë•Œ â€œë°˜ì‘â€í•˜ëŠ” Effect ì•ˆì— ë„£ì—ˆë‹¤.

```jsx
function Form() {
  const [submitted, setSubmitted] = useState(false);

  useEffect(() => {
    if (submitted) {
      // ğŸ”´ Avoid: Event-specific logic inside an Effect
      post('/api/register');
      showNotification('Successfully registered!');
    }
  }, [submitted]);

  function handleSubmit() {
    setSubmitted(true);
  }

  // ...
}
```

ë‚˜ì¤‘ì— í˜„ì¬ í…Œë§ˆì— ë”°ë¼ ì•Œë¦¼ ë©”ì„¸ì§€ì˜ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ê³  ì‹¶ìœ¼ë¯€ë¡œ í˜„ì¬ í…Œë§ˆë¥¼ ì½ëŠ”ë‹¤.

`theme` ëŠ” ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì— ì„ ì–¸ë˜ì—ˆê¸° ë•Œë¬¸ì— ì´ëŠ” ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.

```jsx
  const theme = useContext(ThemeContext);

  useEffect(() => {
    if (submitted) {
      // ğŸ”´ Avoid: Event-specific logic inside an Effect
      post('/api/register');
      showNotification('Successfully registered!', theme);
    }
  }, [submitted, theme]); // âœ… All dependencies declared
```

ì´ë ‡ê²Œ í•˜ë©´ ë²„ê·¸ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.

ë¨¼ì € í¼ì„ ì œì¶œí•œ ë‹¤ìŒ ì–´ë‘ìš´ í…Œë§ˆì™€ ë°ì€ í…Œë§ˆ ê°„ ì „í™˜í•œë‹¤ê³  ê°€ì •í•´ ë³´ê² ë‹¤.

`theme` ëŠ” ë³€ê²½ë˜ê³  Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì–´ ë™ì¼í•œ ì•Œë¦¼ì´ ë‹¤ì‹œ í‘œì‹œëœë‹¤!

**ì—¬ê¸°ì„œ ë¬¸ì œëŠ” ì´ê²ƒì´ ì• ì´ˆì— Effectê°€ ì•„ë‹ˆì–´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.**

ì´ POST ìš”ì²­ì„ ë³´ë‚´ê³  íŠ¹ì • ìƒí˜¸ì‘ìš©ì¸ í¼ ì œì¶œì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ì•Œë¦¼ì„ í‘œì‹œí•˜ê³  ì‹¶ë‹¤ëŠ” ê²ƒì´ë‹¤.

íŠ¹ì • ìƒí˜¸ì‘ìš©ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ì¼ë¶€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ í•´ë‹¹ ë¡œì§ì„ í•´ë‹¹ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì§ì ‘ ë„£ì–´ì•¼ í•œë‹¤.

```jsx
  function handleSubmit() {
    // âœ… Good: Event-specific logic is called from event handlers
    post('/api/register');
    showNotification('Successfully registered!', theme);
  }
```

### Effectê°€ ê´€ë ¨ ì—†ëŠ” ì—¬ëŸ¬ ê°€ì§€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë‚˜ìš”?

ë‹¤ìŒ ì§ˆë¬¸ì€ Effectê°€ ì„œë¡œ ê´€ë ¨ì´ ì—†ëŠ” ì—¬ëŸ¬ ê°€ì§€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆëŠ”ì§€ ì—¬ë¶€ì´ë‹¤.

**ì„œë¡œ ê´€ë ¨ ì—†ëŠ” ë‘ ê°€ì§€ ë™ê¸°í™”ë¥¼ í•˜ë©´ ë¬¸ì œê°€ ìƒê¸´ë‹¤.**

ê° EffectëŠ” ë…ë¦½ì ì¸ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ì•¼ í•œë‹¤. ì¤‘ë³µì´ ê±±ì •ëœë‹¤ë©´ ë°˜ë³µë˜ëŠ” ë¡œì§ì„ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ ì½”ë“œë¥¼ ê°œì„ í•  ìˆ˜ ìˆë‹¤.

### ë‹¤ìŒ Stateë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•´ ì–´ë–¤ Stateë¥¼ ì½ê³  ìˆë‚˜ìš”?

ì´ EffectëŠ” ìƒˆ ë©”ì„¸ì§€ê°€ ë„ì°©í•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ëœ ë°°ì—´ë¡œ `messages` state ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.

```jsx
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      setMessages([...messages, receivedMessage]);
    });
    // ...
```

`messages` ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ê¸°ì¡´ ë©”ì„¸ì§€ë¡œ ì‹œì‘í•˜ëŠ” ìƒˆ ë°°ì—´ì„ ìƒì„±í•˜ê³  ë§ˆì§€ë§‰ì— ìƒˆ ë©”ì„¸ì§€ë¥¼ ì¶”ê°€í•œë‹¤.

í•˜ì§€ë§Œ `messages` ëŠ” Effectì—ì„œ ì½ëŠ” ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ì˜ì¡´ì„±ì´ì–´ì•¼ í•œë‹¤.

```jsx
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      setMessages([...messages, receivedMessage]);
    });
    return () => connection.disconnect();
  }, [roomId, messages]); // âœ… All dependencies declared
  // ...
```

í•˜ì§€ë§Œ `messages` ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ë§Œë“¤ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

ë©”ì„¸ì§€ë¥¼ ìˆ˜ì‹ í•  ë•Œë§ˆë‹¤ `setMessages()` ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìˆ˜ì‹ ëœ ë©”ì„¸ì§€ë¥¼ í¬í•¨í•˜ëŠ” ìƒˆ `messages` ë°°ì—´ë¡œ ì¬ë Œë”ë§í•˜ë„ë¡ í•œë‹¤.

í•˜ì§€ë§Œ ì´ EffectëŠ” ì´ì œ `messages` ì— ë”°ë¼ ë‹¬ë¼ì§€ë¯€ë¡œ Effectë„ ë‹¤ì‹œ ë™ê¸°í™”ëœë‹¤. ë”°ë¼ì„œ ìƒˆ ë©”ì„¸ì§€ê°€ ì˜¬ ë•Œë§ˆë‹¤ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ëœë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ Effect ë‚´ì—ì„œ `messages` ì—ì„œ ì½ì§€ ë§ì•„ì•¼ í•œë‹¤. ëŒ€ì‹  ì—…ë°ì´í„° í•¨ìˆ˜ë¥¼ `setMessages` ì— ì „ë‹¬í•´ë¼.

```jsx
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      setMessages(msgs => [...msgs, receivedMessage]);
    });
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared
  // ...
```

**ì´ì œ Effectê°€ `messages` ë³€ìˆ˜ë¥¼ ì „í˜€ ì½ì§€ ì•ŠëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.**

`msgs => [...msgs, receivedMessage]` ì™€ ê°™ì€ ì—…ë°ì´í„° í•¨ìˆ˜ë§Œ ì „ë‹¬í•˜ë©´ ëœë‹¤.

ë¦¬ì•¡íŠ¸ëŠ” ì—…ë°ì´í„° í•¨ìˆ˜ë¥¼ ëŒ€ê¸°ì—´ì— ë„£ê³  ë‹¤ìŒ ë Œë”ë§ ì¤‘ì— `msgs` ì¸ìˆ˜ë¥¼ ì œê³µí•œë‹¤. ì´ ë•Œë¬¸ì— Effect ìì²´ëŠ” ë” ì´ìƒ `messages` ì— ì˜ì¡´í•  í•„ìš”ê°€ ì—†ë‹¤.

### ê°’ì˜ ë³€ê²½ì— â€˜ë°˜ì‘â€™í•˜ì§€ ì•Šê³  ê°’ì„ ì½ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?

> **ê°œë°œ ì¤‘ì¸ ê¸°ìˆ !**
ì´ ì„¹ì…˜ì—ì„œëŠ” ì•„ì§ ì•ˆì •ëœ ë²„ì „ì˜ ë¦¬ì•¡íŠ¸ë¡œ **ì¶œì‹œë˜ì§€ ì•Šì€ ì‹¤í—˜ì ì¸ API**ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.
> 

ì‚¬ìš©ìê°€ ìƒˆ ë©”ì„¸ì§€ë¥¼ ìˆ˜ì‹ í•  ë•Œ `isMuted` ê°€  `true` ê°€ ì•„ë‹Œ ê²½ìš° ì‚¬ìš´ë“œë¥¼ ì¬ìƒí•˜ê³  ì‹¶ë‹¤ê³  ê°€ì •í•´ ë³´ê² ë‹¤.

```jsx
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  const [isMuted, setIsMuted] = useState(false);

  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      setMessages(msgs => [...msgs, receivedMessage]);
      if (!isMuted) {
        playSound();
      }
    });
    return () => connection.disconnect();
  }, [roomId, isMuted]); // âœ… All dependencies declared
  // ...
```

ê·¸ëŸ¬ë©´ `isMuted` ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì˜ì¡´ì„±ì— ì¶”ê°€í•´ì•¼ í•œë‹¤.

ë¬¸ì œëŠ” `isMuted` ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë˜ê³  ì±„íŒ…ì— ë‹¤ì‹œ ì—°ê²°ëœë‹¤ëŠ” ì ì´ë‹¤. ì´ëŠ” ë°”ëŒì§í•œ ì‚¬ìš©ì ê²½í—˜ì´ ì•„ë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ Effectì—ì„œ ë°˜ì‘í•´ì„œëŠ” ì•ˆë˜ëŠ” ë¡œì§ì„ ì¶”ì¶œí•´ì•¼ í•œë‹¤.

ì´ Effectê°€ `isMuted` ì˜ ë³€ê²½ì— â€œë°˜ì‘â€í•˜ì§€ ì•Šê¸°ë¥¼ ì›í•œë‹¤. ì´ ë¹„ë°˜ì‘ ë¡œì§ì„ Effect ì´ë²¤íŠ¸ë¡œ ì˜®ê¸°ë©´ ëœë‹¤.

```jsx
import { useState, useEffect, useEffectEvent } from 'react';

function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  const [isMuted, setIsMuted] = useState(false);

  const onMessage = useEffectEvent(receivedMessage => {
    setMessages(msgs => [...msgs, receivedMessage]);
    if (!isMuted) {
      playSound();
    }
  });

  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      onMessage(receivedMessage);
    });
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared
  // ...
```

Effect ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ Effectë¥¼ ë°˜ì‘í˜• ë¶€ë¶„ê³¼ ë¹„ë°˜ì‘í˜• ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.

**ì´ì œ Effect ì´ë²¤íŠ¸ ë‚´ì—ì„œ `isMuted` ë¥¼ ì½ì—ˆìœ¼ë¯€ë¡œ Effectì˜ ì˜ì¡´ì„±ì´ ë  í•„ìš”ê°€ ì—†ë‹¤.**

### propsë¥¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ê°ì‹¸ê¸°

ì»´í¬ë„ŒíŠ¸ê°€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ propsë¡œ ë°›ì„ ë•Œ ë¹„ìŠ·í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

```jsx
function ChatRoom({ roomId, onReceiveMessage }) {
  const [messages, setMessages] = useState([]);

  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      onReceiveMessage(receivedMessage);
    });
    return () => connection.disconnect();
  }, [roomId, onReceiveMessage]); // âœ… All dependencies declared
  // ...
```

ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë‹¤ë¥¸ `onRecieveMessage` í•¨ìˆ˜ë¥¼ ì „ë‹¬í•œë‹¤ê³  ê°€ì •í•´ ë³´ê² ë‹¤.

```jsx
<ChatRoom
  roomId={roomId}
  onReceiveMessage={receivedMessage => {
    // ...
  }}
/>
```

`onReceiveMessage` ëŠ” ì˜ì¡´ì„±ì´ë¯€ë¡œ ë¶€ëª¨ê°€ ì¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ëœë‹¤. ê·¸ëŸ¬ë©´ ì±„íŒ…ì— ë‹¤ì‹œ ì—°ê²°ë˜ê²Œ ëœë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ í˜¸ì¶œì„ Effect ì´ë²¤íŠ¸ë¡œ ê°ì‹¸ì•¼ í•œë‹¤.

```jsx
function ChatRoom({ roomId, onReceiveMessage }) {
  const [messages, setMessages] = useState([]);

  const onMessage = useEffectEvent(receivedMessage => {
    onReceiveMessage(receivedMessage);
  });

  useEffect(() => {
    const connection = createConnection();
    connection.connect();
    connection.on('message', (receivedMessage) => {
      onMessage(receivedMessage);
    });
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared
  // ...
```

Effect ì´ë²¤íŠ¸ëŠ” ë°˜ì‘í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í•  í•„ìš”ê°€ ì—†ë‹¤.

ê·¸ ê²°ê³¼, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ë”ë¼ë„ ì±„íŒ…ì´ ë” ì´ìƒ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤.

### ì¼ë¶€ ë°˜ì‘í˜• ê°’ì´ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ë‚˜ìš”?

Effectê°€ íŠ¹ì • ê°’ì— â€˜ë°˜ì‘â€™í•˜ê¸°ë¥¼ ì›í•˜ì§€ë§Œ, ê·¸ ê°’ì´ ì›í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ìì£¼ ë³€ê²½ë˜ì–´ ì‚¬ìš©ìì˜ ê´€ì ì—ì„œ ì‹¤ì œ ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜í•˜ì§€ ëª»í•  ìˆ˜ë„ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ì— `options` ê°ì²´ë¥¼ ìƒì„±í•œ ë‹¤ìŒ Effect ë‚´ë¶€ì—ì„œ í•´ë‹¹ ê°ì²´ë¥¼ ì½ëŠ”ë‹¤ê³  ê°€ì •í•´ ë³´ê² ë‹¤.

```jsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  // Temporarily disable the linter to demonstrate the problem
  // eslint-disable-next-line react-hooks/exhaustive-deps
  const options = {
    serverUrl: serverUrl,
    roomId: roomId
  };

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={e => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}

```

ìœ„ ì½”ë“œì—ì„œ ì…ë ¥ì€ `message` state ë³€ìˆ˜ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤. ì´ê²ƒì€ ì±„íŒ… ì—°ê²°ì— ì˜í–¥ì´ ìˆì–´ì„œëŠ” ì•ˆëœë‹¤.

í•˜ì§€ë§Œ `message` ë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ëœë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§ë˜ë©´ ê·¸ ì•ˆì— ìˆëŠ” ì½”ë“œê°€ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤.

`ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ì¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ `options` ê°ì²´ê°€ ì²˜ìŒë¶€í„° ìƒˆë¡œ ìƒì„±ëœë‹¤. ë¦¬ì•¡íŠ¸ëŠ” `options` ê°ì²´ê°€ ë§ˆì§€ë§‰ ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ `options` ê°ì²´ì™€ ë‹¤ë¥¸ ê°ì²´ì„ì„ ì¸ì‹í•œë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— Effectë¥¼ ë‹¤ì‹œ ë™ê¸°í™”í•˜ê³  ì‚¬ìš©ìê°€ ì…ë ¥í•  ë•Œ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ëœë‹¤.

**ì´ ë¬¸ì œëŠ” ê°ì²´ì™€ í•¨ìˆ˜ì—ë§Œ ì˜í–¥ì„ ì¤€ë‹¤.** 

**ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ì™€ í•¨ìˆ˜ê°€ ë‹¤ë¥¸ ëª¨ë“  ê°ì²´ì™€ êµ¬ë³„ë˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ëœë‹¤. ê·¸ ì•ˆì˜ ë‚´ìš©ì´ ë™ì¼í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.**

```jsx
// During the first render
const options1 = { serverUrl: 'https://localhost:1234', roomId: 'music' };

// During the next render
const options2 = { serverUrl: 'https://localhost:1234', roomId: 'music' };

// These are two different objects!
console.log(Object.is(options1, options2)); // false
```

**ê°ì²´ ë° í•¨ìˆ˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ Effectê°€ í•„ìš” ì´ìƒìœ¼ë¡œ ìì£¼ ì¬ë™ê¸°í™”ë  ìˆ˜ ìˆë‹¤.**

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•˜ë©´ ê°ì²´ì™€ í•¨ìˆ˜ë¥¼ Effectì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤. ëŒ€ì‹  ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë‚˜ Effect ë‚´ë¶€ë¡œ ì´ë™í•˜ê±°ë‚˜ ì›ì‹œ ê°’ì„ ì¶”ì¶œí•´ ë´ë¼.

---

**ê°ì²´ê°€ props ë° stateì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ê²½ìš° í•´ë‹¹ ê°ì²´ë¥¼ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë¡œ ì´ë™í•  ìˆ˜ ìˆë‹¤.**

ì´ëŠ” í•¨ìˆ˜ì—ë„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
const options = {
  serverUrl: 'https://localhost:1234',
  roomId: 'music'
};

function ChatRoom() {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, []); // âœ… All dependencies declared
  // ...
```

---

ê°ì²´ê°€ `roomId`  propsì²˜ëŸ¼ ì¬ë Œë”ë§ì˜ ê²°ê³¼ë¡œ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ë°˜ì‘í˜• ê°’ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°, ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë¡œ ëŒì–´ë‚¼ ìˆ˜ ì—†ë‹¤. **í•˜ì§€ë§Œ Effectì˜ ì½”ë“œ ë‚´ë¶€ë¡œ ì´ë™ì‹œí‚¬ ìˆ˜ëŠ” ìˆë‹¤.**

```jsx
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared
  // ...
```

ì´ì œ `options` ëŠ” Effect ë‚´ë¶€ì—ì„œ ì„ ì–¸ë˜ì—ˆìœ¼ë¯€ë¡œ ë” ì´ìƒ Effectì˜ ì˜ì¡´ì„±ì´ ì•„ë‹ˆë‹¤.

ëŒ€ì‹  Effectì—ì„œ ì‚¬ìš©í•˜ëŠ” ìœ ì¼í•œ ë°˜ì‘í˜•ì€ `roomId`ì´ë‹¤. `roomId` ëŠ” ê°ì²´ë‚˜ í•¨ìˆ˜ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì˜ë„ì¹˜ ì•Šê²Œ ë‹¬ë¼ì§€ì§€ ì•Šì„ ê²ƒì´ë¼ê³  í™•ì‹ í•  ìˆ˜ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìˆ«ìì™€ ë¬¸ìì—´ì€ ê·¸ ë‚´ìš©ì— ë”°ë¼ ë¹„êµëœë‹¤.

```jsx
// During the first render
const roomId1 = 'music';

// During the next render
const roomId2 = 'music';

// These two strings are the same!
console.log(Object.is(roomId1, roomId2)); // true
```

ì´ëŠ” í•¨ìˆ˜ì—ì„œë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.

```jsx
  useEffect(() => {
    function createOptions() {
      return {
        serverUrl: serverUrl,
        roomId: roomId
      };
    }

    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // âœ… All dependencies declared
  // ...
```

---

**ê°€ë” propsì—ì„œ ê°ì²´ë¥¼ ë°›ì„ ìˆ˜ë„ ìˆë‹¤.**

```jsx
function ChatRoom({ options }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [options]); // âœ… All dependencies declared
  // ...
```

ë Œë”ë§ ì¤‘ì— ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤ëŠ” ì ì´ ìœ„í—˜í•˜ë‹¤.

```jsx
<ChatRoom
  roomId={roomId}
  options={{
    serverUrl: serverUrl,
    roomId: roomId
  }}
/>
```

ì´ë ‡ê²Œ í•˜ë©´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ì¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ Effectê°€ ë‹¤ì‹œ ì—°ê²°ëœë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ Effect ì™¸ë¶€ì˜ ê°ì²´ì—ì„œ ì •ë³´ë¥¼ ì½ê³  ê°ì²´ ë° í•¨ìˆ˜ ì˜ì¡´ì„±ì„ í”¼í•´ë¼.

```jsx
function ChatRoom({ options }) {
  const [message, setMessage] = useState('');

  const { roomId, serverUrl } = options;
  useEffect(() => {
    const connection = createConnection({
      roomId: roomId,
      serverUrl: serverUrl
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]); // âœ… All dependencies declared
  // ...
```

ë¡œì§ì€ ì•½ê°„ ë°˜ë³µì ì¼ ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ Effectê°€ ì‹¤ì œë¡œ ì–´ë–¤ ì •ë³´ì— ì˜ì¡´í•˜ëŠ”ì§€ ë§¤ìš° ëª…í™•í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì˜í•´ ì˜ë„ì¹˜ ì•Šê²Œ ê°ì²´ê°€ ë‹¤ì‹œ ìƒì„±ëœ ê²½ìš° ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ ê°’ì´ ë³€ê²½ë˜ë©´ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ëœë‹¤.

---

**í•¨ìˆ˜ì—ì„œë„ ë™ì¼í•œ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**

ì˜ˆë¥¼ ë“¤ì–´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•œë‹¤ê³  ê°€ì •í•´ ë³´ê² ë‹¤.

```jsx
<ChatRoom
  roomId={roomId}
  getOptions={() => {
    return {
      serverUrl: serverUrl,
      roomId: roomId
    };
  }}
/>
```

ì˜ì¡´ì„±ì„ ë§Œë“¤ì§€ ì•Šìœ¼ë ¤ë©´ Effect ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•´ë¼.

ì´ë ‡ê²Œ í•˜ë©´ ê°ì²´ê°€ ì•„ë‹ˆë©° Effect ë‚´ë¶€ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” `roomId`  ë° `serverUrl`  ê°’ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.

```jsx
function ChatRoom({ getOptions }) {
  const [message, setMessage] = useState('');

  const { roomId, serverUrl } = getOptions();
  useEffect(() => {
    const connection = createConnection({
      roomId: roomId,
      serverUrl: serverUrl
    });
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]); // âœ… All dependencies declared
  // ...
```

ì´ëŠ” ë Œë”ë§ ì¤‘ì— í˜¸ì¶œí•´ë„ ì•ˆì „í•˜ë¯€ë¡œ ìˆœìˆ˜ í•¨ìˆ˜ì—ì„œë§Œ ì‘ë™í•œë‹¤.

í•¨ìˆ˜ê°€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì§€ë§Œ ë³€ê²½ ì‚¬í•­ìœ¼ë¡œ ì¸í•´ Effectê°€ ë‹¤ì‹œ ë™ê¸°í™”ë˜ëŠ” ê²ƒì„ ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°, ëŒ€ì‹  Effect ì´ë²¤íŠ¸ë¡œ í•¨ìˆ˜ë¥¼ ê°ì‹¸ë¼.
